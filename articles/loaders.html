<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Loaders • dbiconf</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Loaders">
<meta property="og:description" content="dbiconf">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dbiconf</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/loaders.html">Loaders</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/shunsambongi/dbiconf/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="loaders_files/accessible-code-block-0.0.1/empty-anchor.js"></script><link href="loaders_files/anchor-sections-1.0/anchor-sections.css" rel="stylesheet">
<script src="loaders_files/anchor-sections-1.0/anchor-sections.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Loaders</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/shunsambongi/dbiconf/blob/master/vignettes/loaders.Rmd"><code>vignettes/loaders.Rmd</code></a></small>
      <div class="hidden name"><code>loaders.Rmd</code></div>

    </div>

    
    
<p>Database parameters can be configured to dynamically obtain its value at connection-time using “loaders”. For example, a database might look like:</p>
<pre class="toml"><code>[database.EXAMPLE]
_driver = "RSQLite::SQLite"
dbname = { interactive = true }</code></pre>
<p>In this case, the <code>dbname</code> parameter is a loader, and the value will be obtained from the user interactively when creating a connection using <code>dbConnect()</code>. Loaders are usually specified using <a href="https://toml.io/en/v1.0.0-rc.3#inline-table">inline tables</a>, but standard <a href="https://toml.io/en/v1.0.0-rc.3#table">tables</a> are also fine.</p>
<p>There are a few different type of loaders, which are explained below.</p>
<div id="interactive-loader" class="section level2">
<h2 class="hasAnchor">
<a href="#interactive-loader" class="anchor"></a>Interactive loader</h2>
<p>The interactive loader will show an interactive prompt at connection-time for the user to type the parameter value. The value obtained from the prompt can be specified as being a secret or not. If the value is secret, the prompt will mask the value as it is being typed, otherwise the value will be plainly visible. By default the prompt will be secret.</p>
<p>When specifying an interactive loader, it should have a single key <code>interactive</code>. The value of <code>interactive</code> should be one of the following:</p>
<ol style="list-style-type: decimal">
<li>
<p>the value <code>true</code></p>
<pre class="toml"><code>param = { interactive = true }</code></pre>
</li>
<li>
<p>a table with the following keys:</p>
<ul>
<li>
<code>prompt</code> - an optional string indicating the prompt message</li>
<li>
<code>secret</code> - an optional boolean indicating whether the prompt should be secret or not.</li>
</ul>
<pre class="toml"><code>param1 = { interactive = { prompt = "Enter your email", secret = false } }</code></pre>
</li>
</ol>
</div>
<div id="environment-variable-loader" class="section level2">
<h2 class="hasAnchor">
<a href="#environment-variable-loader" class="anchor"></a>Environment variable loader</h2>
<p>The environment variable loader can dynamically obtain parameter values from an environment variable.</p>
<p>An environment variable loader should have a single key <code>envvar</code>. The value of <code>envvar</code> should be one of the following:</p>
<ol style="list-style-type: decimal">
<li>
<p>a non-empty string specifying the environment variable to read from</p>
<pre class="toml"><code>param = { envvar = "MY_SECRET_VALUE" }</code></pre>
</li>
<li>
<p>a table with the following keys:</p>
<ul>
<li>
<code>x</code> - a required non-empty string specifying the environment variable to read from</li>
<li>
<code>unset</code> - an optional non-empty string specifying the default value to use if the environment variable is unset</li>
</ul>
<pre class="toml"><code>param = { envvar = { x = "MY_SECRET_VALUE", unset = "default value" } }</code></pre>
</li>
</ol>
</div>
<div id="file-loader" class="section level2">
<h2 class="hasAnchor">
<a href="#file-loader" class="anchor"></a>File loader</h2>
<p>A file loader will read a file, and use the content as the parameter value. You can also specify whether any whitespace surrounding the content should be trimmed or not, e.g. a trailing newline.</p>
<p>A file loader should have a single key <code>file</code>. The value of <code>file</code> should be one of the following:</p>
<ol style="list-style-type: decimal">
<li>
<p>a non-empty string specifying the path to the file to read from</p>
<pre class="toml"><code>param = { file = "my-secret.txt" } </code></pre>
</li>
<li>
<p>a table with the following keys:</p>
<ul>
<li>
<code>path</code> - a required non-empty string specifying the path to the file to read from</li>
<li>
<code>trim</code> - an optional boolean specifying whether the content should be trimmed of whitespace (default: <code>true</code>)</li>
</ul>
<pre class="toml"><code>param = { file = { path = "my-secret.txt", trim = false } }</code></pre>
</li>
</ol>
</div>
<div id="keyring-loader" class="section level2">
<h2 class="hasAnchor">
<a href="#keyring-loader" class="anchor"></a>Keyring loader</h2>
<p>A keyring loader uses the <a href="https://github.com/r-lib/keyring">keyring</a> package to read values from the OS system credential store.</p>
<p>A keyring loader should have a single key <code>keyring</code>. The value of <code>keyring</code> should be one of the following:</p>
<ol style="list-style-type: decimal">
<li>
<p>a non-empty string specifying the service to obtain the value from (see <code><a href="https://rdrr.io/pkg/keyring/man/key_get.html">?keyring::key_get</a></code>)</p>
<pre class="toml"><code>param = { keyring = "my-password" }</code></pre>
</li>
<li>
<p>a table with the following keys:</p>
<ul>
<li>
<code>service</code> - a required non-empty string specifying the service to obtain the value from</li>
<li>
<code>username</code> - an optional string specifying the <code>username</code> passed <code><a href="https://rdrr.io/pkg/keyring/man/key_get.html">keyring::key_get()</a></code>
</li>
<li>
<code>keyring</code> - an optional string specifying the <code>keyring</code> passed <code><a href="https://rdrr.io/pkg/keyring/man/key_get.html">keyring::key_get()</a></code>
</li>
</ul>
<p>See <code><a href="https://rdrr.io/pkg/keyring/man/key_get.html">?keyring::key_get</a></code> for more information about these parameters.</p>
<pre class="toml"><code>param = { keyring = { service = "my-password", username = "my-username", keyring = "my-keyring" } } </code></pre>
</li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Shun Sambongi.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
